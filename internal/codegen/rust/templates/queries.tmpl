// Code generated by db-catalyst. DO NOT EDIT.

use sqlx::{PgConnection, Result};
use crate::models::*;

{{range .Queries}}
{{if .Docs}}/// {{.Docs}}{{end}}
pub async fn {{.Name}}(
    conn: &mut PgConnection,
    {{range .Params}}
    {{.Name}}: {{.Type}},
    {{end}}
) -> Result<{{if .IsMany}}Vec<{{.ReturnType}}>{{else}}{{.ReturnType}}{{end}}> {
    {{if .IsMany}}
    sqlx::query_as!(
        {{.ReturnType}},
        r#"
{{.SQL}}
        "#,
        {{range .Params}}{{.Name}}, {{end}}
    )
    .fetch_all(conn)
    .await
    {{else}}
    sqlx::query_as!(
        {{.ReturnType}},
        r#"
{{.SQL}}
        "#,
        {{range .Params}}{{.Name}}, {{end}}
    )
    .fetch_one(conn)
    .await
    {{end}}
}
{{end}}
